<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PL" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <f:event type="preRenderView" listener="#{sesjaView.pobierzsesje()}"/>
    <p:outputPanel id="wrapper">
        <h:form id="form">
            <p:commandButton value="#{mgs.pobierz}" actionListener="#{sesjaView.pobierzsesje()}" update=":form" style="width: 120px; "/>
            <p:dataTable  var="wpis" value="#{sesjaView.wykazsesji}" id="lista" style="padding: 10px;width:1200px;" 
                          paginator="true" paginatorAlwaysVisible="true" rows="30" sortBy="#{wpis.wylogowanie}" 
                          paginatorTemplate="{FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown}" 
                          rowsPerPageTemplate="30,100,200" 
                          rowKey="#{wpis.nrsesji}"> 
                <f:facet name="header">  
                    <h:outputText value="Wykaz sesji" />  
                </f:facet>
                <p:column headerText="nr sesji" filterBy="#{wpis.nrsesji}" filterMatchMode="contains" sortBy="#{wpis.nrsesji}">  
                    <h:outputText value="#{wpis.nrsesji}" />
                </p:column>
                <p:column headerText="login" filterBy="#{wpis.uzytkownik}" filterMatchMode="contains" sortBy="#{wpis.uzytkownik}">  
                    <h:outputText value="#{wpis.uzytkownik}" />
                </p:column>
                <p:column headerText="ip" filterBy="#{wpis.ip}" filterMatchMode="contains" sortBy="#{wpis.ip}">  
                    <h:outputText value="#{wpis.ip}" />
                </p:column>
                <p:column headerText="login" filterBy="#{wpis.zalogowanie}" filterMatchMode="contains" sortBy="#{wpis.zalogowanie}" sortOrder="descending">  
                    <h:outputText value="#{wpis.zalogowanie}" >
                        <f:convertDateTime locale="pl" pattern="EEE, d MMM yyyy HH:mm:ss"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="logout" filterBy="#{wpis.wylogowanie}" filterMatchMode="contains" sortBy="#{wpis.wylogowanie}" sortOrder="descending" sortPriority="1" sortable="true">  
                    <h:outputText value="#{wpis.wylogowanie}" >
                        <f:convertDateTime locale="pl" pattern="EEE, d MMM yyyy HH:mm:ss"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="#{mgs.dokumenty}" filterBy="#{wpis.iloscdokumentow}" filterMatchMode="contains" sortBy="#{wpis.iloscdokumentow}">  
                    <h:outputText value="#{wpis.iloscdokumentow}" />
                </p:column>
                <p:column headerText="wydruki" filterBy="#{wpis.iloscwydrukow}" filterMatchMode="contains" sortBy="#{wpis.iloscwydrukow}">  
                    <h:outputText value="#{wpis.iloscwydrukow}" />
                </p:column>
                <p:column headerText="maile" filterBy="#{wpis.iloscmaili}" filterMatchMode="contains" sortBy="#{wpis.iloscmaili}">  
                    <h:outputText value="#{wpis.iloscmaili}" />
                </p:column>
            </p:dataTable>
        </h:form>
    </p:outputPanel>
</ui:composition>   

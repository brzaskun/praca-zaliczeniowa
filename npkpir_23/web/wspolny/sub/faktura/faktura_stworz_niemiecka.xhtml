<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    >
    <p:outputPanel rendered="#{fakturaView.fakturaniemiecka}">
        <p:panelGrid layout="tabular" columns="4">
            <h:outputText value="licz od wartości brutto "/>
            <p:selectBooleanCheckbox value="#{fakturaView.selected.liczodwartoscibrutto}">
                <p:ajax event="change" update="akordeon:formstworz:rzadfn akordeon:formstworz:rzadkorektyfn"/>
            </p:selectBooleanCheckbox>
            <h:outputText value="Gutschrift "/>
            <p:selectBooleanCheckbox value="#{fakturaView.selected.gutschrift}">
                <p:ajax event="change" update="akordeon:formstworz:rzadfn akordeon:formstworz:rzadkorektyfn"/>
            </p:selectBooleanCheckbox>
        </p:panelGrid>
        <p:outputPanel style="margin-top: 15px;">
                    <p:dataTable lazy="false"  id="rzadfn" value="#{fakturaView.selected.pozycjenafakturze}" var="row" rowIndexVar="rowStat"
                                 style="width: 850px;"
                                 >
                        <f:facet name="header" >
                            <h:outputText value="przed korektą"  rendered="#{fakturaView.fakturakorekta}"/>
                        </f:facet>
                        <p:column headerText="nazwa" width="380" style="text-align: center;">
                            <p:inputText id="nazwa" value="#{row.nazwa}" style="width: 340px;"
                                         styleClass="komorka"  label="text" title="nazwa towaru lub usługi" placeholder="nazwa towaru lub usługi">
                                <p:ajax global="false" event="focus" onstart="sprawdzczynazwaskroconafakturaniejestshown();"/>
                            </p:inputText>   
                        </p:column>
                        <p:column headerText="jedn. miary" width="65" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <h:selectOneMenu id="jednmiary" value="#{row.jednostka}" title="stawka podatku VAT" style="width: 60px;"
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="Pauschal" itemValue="Pausch."/>
                                <f:selectItem itemLabel="Stück" itemValue="Stück"/>
                                <f:selectItem itemLabel="Std" itemValue="Std"/>
                                <f:selectItem itemLabel="Kg" itemValue="Kg"/>
                                <f:selectItem itemLabel="Km" itemValue="Km"/>
                                <f:selectItem itemLabel="Kpl" itemValue="Kpl"/>
                                <f:selectItem itemLabel="Monat" itemValue="Monat"/>
                                <f:selectItem itemLabel="Pers." itemValue="Pers."/>
                                <f:selectItem itemLabel="M2" itemValue="M2"/>
                                <f:selectItem itemLabel="Mg" itemValue="Mg"/>
                                <f:selectItem itemLabel="m3" itemValue="m3"/><f:selectItem itemLabel="m2" itemValue="m2"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column headerText="ilość" width="60" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <p:inputText id="ilosc" value="#{row.ilosc}" label="text" title="ilość" style="text-align:  right; width: 50px;"
                                         placeholder="ilość"></p:inputText>
                        </p:column>
                        <p:column headerText="#{fakturaView.selected.liczodwartoscibrutto ? 'cena jedn.brutto' : 'cena jedn.netto'}" width="120" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <p:inputNumber id="cena" value="#{row.cena}" required="true" styleClass="kwotarozrachunku" size="13"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" signPosition="p"    
                                            thousandSeparator="&#160;" inputStyle="text-align: right;" decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="stawka VAT" width="70" style="text-align: center;">
                            <h:selectOneMenu id="podatek" value="#{row.podatek}" title="stawka podatku VAT" style="width: 60px;" 
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="§13b" itemValue="-3"/>
                                <f:selectItem itemLabel="19%" itemValue="19"/>
                                <f:selectItem itemLabel="np" itemValue="-1"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column style="text-align: center;" width="30">
                            <p:commandButton icon="ui-icon-trash" actionListener="#{fakturaView.usunwierszSrodek(row)}"  update="@namingcontainer" global="false"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
                <p:outputPanel  style="margin-top: 25px;">
                    <p:commandButton value="dodaj wiersz" actionListener="#{fakturaView.dodajwiersz()}"  update="akordeon:formstworz:rzadfn"
                                     oncomplete="wybierzrzadfaktury();" style="margin-bottom: 25px; width: 120px;" partialSubmit="true"/>
                    <p:commandButton value="usuń wiersz" actionListener="#{fakturaView.usunwiersz()}" partialSubmit="true" update="akordeon:formstworz:rzadfn"
                                     style="margin-left: 25px; width: 120px;"
                                     />
                </p:outputPanel>
                <!--                panel korekty-->
                <p:outputPanel style="margin-top: 15px;" rendered="#{fakturaView.fakturakorekta}">
                    <p:dataTable lazy="false"  id="rzadkorektyfn"  value="#{fakturaView.selected.pozycjepokorekcie}" 
                                 var="row" rowIndexVar="rowStat" 
                                 style="width: 750px;"
                                 >
                        <f:facet name="header">
                            <h:outputText value="po korekcie"/>
                        </f:facet>
                        <p:column headerText="nazwa" width="280">
                            <p:inputText id="nazwak" value="#{row.nazwa}" style="width: 260px; text-align: left;"
                                         styleClass="komorkak"  label="text" title="nazwa towaru lub usługi" placeholder="nazwa towaru lub usługi">
                                <p:ajax global="false" event="focus" />
                            </p:inputText>   
                        </p:column>
                        <p:column headerText="jedn. miary" width="65" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <h:selectOneMenu id="jednmiaryk" value="#{row.jednostka}" title="stawka podatku VAT" style="width: 60px;"
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="Pauschal" itemValue="Pausch."/>
                                <f:selectItem itemLabel="Stück" itemValue="Stück"/>
                                <f:selectItem itemLabel="Std" itemValue="Std"/>
                                <f:selectItem itemLabel="Kg" itemValue="Kg"/>
                                <f:selectItem itemLabel="Km" itemValue="Km"/>
                                <f:selectItem itemLabel="Kpl" itemValue="Kpl"/>
                                <f:selectItem itemLabel="Monat" itemValue="Monat"/>
                                <f:selectItem itemLabel="Pers." itemValue="Pers."/>
                                <f:selectItem itemLabel="M2" itemValue="M2"/>
                                <f:selectItem itemLabel="Mg" itemValue="Mg"/>
                                <f:selectItem itemLabel="m3" itemValue="m3"/><f:selectItem itemLabel="m2" itemValue="m2"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column headerText="ilość" width="60" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <p:inputText id="ilosck" value="#{row.ilosc}" label="text" title="ilość" style="text-align:  right; width: 50px;" placeholder="ilość"></p:inputText>
                        </p:column>
                        <p:column headerText="#{fakturaView.selected.liczodwartoscibrutto ? 'cena jedn.brutto' : 'cena jedn.netto'}" width="90" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <p:inputNumber id="cenak" value="#{row.cena}" required="true" styleClass="kwotarozrachunku" size="13"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" signPosition="p"    
                                             thousandSeparator="&#160;" inputStyle="text-align: right;" decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="stawka VAT" width="70">
                            <h:selectOneMenu id="podatekk" value="#{row.podatek}" title="stawka podatku VAT" style="width: 60px;" 
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="§13b" itemValue="-3"/>
                                <f:selectItem itemLabel="19%" itemValue="19"/>
                                <f:selectItem itemLabel="np" itemValue="-1"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column style="text-align: center;">
                            <p:commandButton icon="ui-icon-trash" actionListener="#{fakturaView.usunwierszSrodekk(row)}" update="@namingcontainer" global="false"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
                <p:outputPanel  style="margin-top: 25px;"  rendered="#{fakturaView.fakturakorekta}">
                    <p:commandButton value="dodaj wiersz" actionListener="#{fakturaView.dodajwierszk()}" update="akordeon:formstworz:rzadkorektyfn"
                                     oncomplete="wybierzrzadfakturykorekta();" style="margin-bottom: 25px; width: 120px;" partialSubmit="true"/>
                    <p:commandButton value="usuń wiersz" actionListener="#{fakturaView.usunwierszk()}" partialSubmit="true" update="akordeon:formstworz:rzadkorektyfn"
                                     style="margin-left: 25px; width: 120px;"
                                     />
                </p:outputPanel>
    </p:outputPanel>
</ui:composition>
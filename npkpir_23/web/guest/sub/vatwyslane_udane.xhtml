<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:bcf="http://brzaskun.com/facelets">

    <p:tab title="Deklaracje wysłane z otrzymanym potwierdzeniem. Można je wydrukować i wysłać mailem">
        <p:dataTable id="dataList" value="#{deklaracjevatView.wyslanenormalne}" var="item" selectionMode="single" rowKey="#{item.id}" rowIndexVar="row">
            <p:column style="width: 2%;">
                <p:rowToggler/>
            </p:column>
            <p:column width="40">
                <f:facet name="header">
                    <h:outputText value="Status"/>
                </f:facet>
                <h:outputText value="#{item.status}"/>
            </p:column>
            <p:column width="210">
                <f:facet name="header">
                    <h:outputText value="Indentyfikator i Opis"/>
                </f:facet>
                <h:outputText value="#{item.identyfikator}"/><br/>
                <h:outputText value="#{item.opis}"/>
            </p:column>
            <p:column width="50">
                <f:facet name="header">
                    <h:outputText value="Rok - Miesiac"/>
                </f:facet>
                <h:outputText value="#{item.rok} - #{item.miesiac}" style="font-weight: 900;"/>
            </p:column>
            <p:column width="40">
                <f:facet name="header">
                    <h:outputText value="Wersja"/>
                </f:facet>
                <h:outputText value="#{item.wzorschemy}"/>
            </p:column>
            <p:column width="670">
                <f:facet name="header">
                    <h:outputText value="Dane"/>
                </f:facet>
                <p:dataTable value="#{item.selected}" var="loop" rowIndexVar="row">
                    <p:column headerText="pierw./kor."><h:outputText value="#{loop.celzlozenia eq 1 ? 'pierwotna' : 'korekta'}"/></p:column>
                    <p:column headerText="należny (p.46)"><h:outputText value="#{loop.pozycjeszczegolowe.poleI46}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText></p:column>
                    <p:column headerText="naliczony (p.55)"><h:outputText value="#{loop.pozycjeszczegolowe.poleI55}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText></p:column>
                    <p:column headerText="przeniesienie (p.47)"><h:outputText value="#{loop.pozycjeszczegolowe.poleI47}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText></p:column>
                    <p:column headerText="do zapłaty (p.58)"><h:outputText value="#{loop.pozycjeszczegolowe.poleI58}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText></p:column>
                    <p:column headerText="do zwrotu(p.60)"><h:outputText value="#{loop.pozycjeszczegolowe.poleI60}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText></p:column>
                </p:dataTable>
            </p:column>

            <p:column width="60" style="text-align: center;">
                <f:facet name="header">
                    <h:outputText value="#{mgs.drukuj}"/>
                </f:facet>
                <p:commandButton value="Pdf" actionListener="#{deklaracjevatView.drukujdeklaracje(item, row)}" style="width: 60px;"/>
            </p:column>
            <p:column width="60" style="text-align: center;">
                <f:facet name="header">
                    <h:outputText value="mail"/>
                </f:facet>
                <p:commandButton id="mailbutton" value="Mail" actionListener="#{deklaracjevatView.mailvat7(row)}" update=":formX" style="width: 60px; display: none;"  />
            </p:column>
            
                <p:rowExpansion>
                    <p:column id="ewidencjavat" headerText="treść wysyłki" width="1000" resizable="true">
                        <h:outputText value="#{item.deklaracja}"/>
                    </p:column>
                </p:rowExpansion>
        </p:dataTable>
    </p:tab>

</ui:composition>   



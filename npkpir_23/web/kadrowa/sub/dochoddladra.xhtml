
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:bcf="http://brzaskun.com/facelets" xmlns:pe="http://primefaces.org/ui/extensions">
    <p:outputPanel style="padding: 20px;">
        <p:tabView id="akordeon" >
            <p:tab title="Wartości miesięczne">
                <p:outputPanel>
                    <f:view>
                        <h:form id="formtabela">
                            <p:panelGrid columns="9">
                                <h:outputText value="rok deklaracji:" style="text-shadow: #6374AB 1px -1px 1px"/>
                                <p:selectOneMenu id="rokWpisu" value="#{dochodDlaDRAView.rok}" style="width: 70px;">
                                    <f:selectItem itemLabel="wybierz" noSelectionOption="true"/>
                                    <f:selectItems value="#{roki.rokiList}"/>
                                    <p:ajax event="change" partialSubmit="true"/>
                                </p:selectOneMenu>
                                <h:outputText value="miesiąc deklaracji:" style="text-shadow: #6374AB 1px -1px 1px"/>
                                <p:selectOneMenu id="miesiacWpisu" value="#{dochodDlaDRAView.mc}" style="width: 70px;">
                                    <f:selectItem itemLabel="wybierz" noSelectionOption="true"/>
                                    <f:selectItems value="#{mce.mceList}"/>
                                    <p:ajax event="change" partialSubmit="true" listener="#{dochodDlaDRAView.pobierz}" update="akordeon:formtabela akordeon:formtabela1" oncomplete="r('akordeon:formtabela:przeliczbutton').show()"/>
                                </p:selectOneMenu>

                                <p:selectBooleanCheckbox value="#{dochodDlaDRAView.pokazzrobione}"  itemLabel="pokaż zrobione" style="width: 220px;margin-left: 20px;">
                                    <p:ajax event="change" partialSubmit="true" listener="#{dochodDlaDRAView.pobierz}"  update="akordeon:formtabela akordeon:formtabela1"/>
                                </p:selectBooleanCheckbox>
                                
                                <h:outputText value="rodzaj opodatkowania:" style="text-shadow: #6374AB 1px -1px 1px"/>
                                <p:selectOneMenu id="opodatkowanie" value="#{dochodDlaDRAView.opodatkowanie}" style="width: 70px;margin-left: 20px;">
                                    <f:selectItem itemLabel="wszystkie" noSelectionOption="true"/>
                                    <f:selectItem itemLabel="skala" itemValue="skala"/>
                                    <f:selectItem itemLabel="liniowy" itemValue="liniowy"/>
                                    <f:selectItem itemLabel="ryczałt" itemValue="ryczałt"/>
                                    <p:ajax event="change" partialSubmit="true" listener="#{dochodDlaDRAView.modyfikujliste}" update="akordeon:formtabela akordeon:formtabela1" oncomplete="r('akordeon:formtabela:przeliczbutton').show()"/>
                                </p:selectOneMenu><!-- comment -->
                                <p:commandButton id="przeliczbutton" value="przelicz" actionListener="#{dochodDlaDRAView.przelicz(null)}"  style="width: 120px;margin-left: 20px;" update="akordeon:formtabela akordeon:formtabela1"/>
                            </p:panelGrid>
                            <p:dataTable lazy="false"  value="#{dochodDlaDRAView.wiersze}" var="item" style="width: 1850px;padding: 20px;" 
                                         scrollable="true" scrollHeight="750" scrollRows="30" filteredValue="#{dochodDlaDRAView.wierszeFiltered}"
                                         emptyMessage="nie pobrano danych" id="wykazschem" rowKey="#{item.podatnikudzial.podatnikObj.nip}" rowIndexVar="yndex" reflow="true"
                                         selection="#{dochodDlaDRAView.selected}" selectionMode="single" sortBy="#{item.podatnikudzial.podatnikObj.printnazwa}" >
                                <p:column style="width: 20px;">
                                    <f:facet name="header">
                                        <h:outputText value="id"/>
                                    </f:facet>
                                    <h:outputText value="#{yndex+1}" style="width: 20px;"/>
                                </p:column>
                                <p:column  style="width: 300px;" exportable="false" filterBy="#{item.podatnikudzial.podatnikObj.printnazwa}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="płatnik"/>
                                    </f:facet>
                                    <h:outputText value="#{item.podatnikudzial.podatnikObj.printnazwa}"/>
                                    <h:outputText value="/"/>
                                    <h:outputText value="#{item.podatnikudzial.nazwiskoimie}"/>
                                </p:column>
                                <p:column  style="width: 80px;" exportable="false" filterBy="#{item.podatnikudzial.podatnikObj.nip}" filterMatchMode="startsWith">
                                    <f:facet name="header">
                                        <h:outputText value="NIP"/>
                                    </f:facet>
                                    <h:outputText value="#{item.podatnikudzial.podatnikObj.nip}"/>
                                </p:column>
                                <p:column  style="width: 70px;" filterBy="#{item.podatnikudzial.podatnikObj.datarozpoczecia}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="data rozp"/>
                                    </f:facet>
                                    <h:outputText value="#{item.podatnikudzial.podatnikObj.datarozpoczecia}"/>
                                </p:column>
                                <p:column  style="width: 20px;" filterBy="#{item.opodatkowanie}">
                                    <f:facet name="header">
                                        <h:outputText value="op."/>
                                    </f:facet>
                                    <h:outputText value="R" rendered="#{!item.opodatkowanie.equals('brak opodatkowania') and item.opodatkowanie.equals('ryczałt')}" style="color:darkslateblue"/>
                                    <h:outputText value="L" rendered="#{!item.opodatkowanie.equals('brak opodatkowania') and item.opodatkowanie.contains('liniow')}" style="color:darkgreen"/>
                                    <h:outputText value="S" rendered="#{!item.opodatkowanie.equals('brak opodatkowania') and item.opodatkowanie.contains('ogól')}"/>
                                    <h:outputText value="br" rendered="#{item.opodatkowanie.equals('brak ')}" style="color: darkviolet"/>
                                </p:column>
                                <p:column  style="width: 40px;">
                                    <f:facet name="header">
                                        <h:outputText value="udzial"/>
                                    </f:facet>
                                    <h:outputText value="#{item.podatnikudzial.udzial}" rendered="#{item.podatnikudzial.udzial ne 100}"/>
                                </p:column>
                                <p:column  style="width: 30px;">
                                    <f:facet name="header">
                                        <h:outputText value="dok."/>
                                    </f:facet>
                                    <h:outputText value="brak" rendered="#{item.brakdokumentow}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="wynik pod. mc"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.wynikpodatkowymc}" rendered="#{!item.brakdokumentow and item.wynikpodatkowymc gt 0.0}"/>
                                    <bcf:outputpl value="#{item.wynikpodatkowymc}" rendered="#{!item.brakdokumentow and item.wynikpodatkowymc lt 0.0}" stylePlus="color:red;"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="wynik pod. nar."/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.wynikpodatkowynar}" rendered="#{!item.brakdokumentow and item.wynikpodatkowynar gt 0.0}"/>
                                    <bcf:outputpl value="#{item.wynikpodatkowynar}" rendered="#{!item.brakdokumentow and item.wynikpodatkowynar lt 0.0}" stylePlus="color:red;"/>
                                </p:column>
<!--                                 <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="wynik pod. mc inne"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.wynikpodatkowymcInne}" rendered="#{!item.brakdokumentow and item.wynikpodatkowymcInne gt 0.0}"/>
                                    <bcf:outputpl value="#{item.wynikpodatkowymcInne}" rendered="#{!item.brakdokumentow and item.wynikpodatkowymcInne lt 0.0}" stylePlus="color:red;"/>
                                </p:column>-->
<!--                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="wynik pod. nar. inne"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.wynikpodatkowynarInne}" rendered="#{!item.brakdokumentow and item.wynikpodatkowynarInne gt 0.0}"/>
                                    <bcf:outputpl value="#{item.wynikpodatkowynarInne}" rendered="#{!item.brakdokumentow and item.wynikpodatkowynarInne lt 0.0}" stylePlus="color:red;"/>
                                </p:column>
-->                                <p:column style="width: 90px;">
                                    <f:facet name="header">
                                        <h:outputText value="przychod nar. ZUS" style="color: red;"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.dochodzusnar}" rendered="#{!item.brakdokumentow and item.dochodzusnar gt 0.0 and item.opodatkowanie eq 'ryczałt'}" stylePlus="color:green;"/>
                                </p:column>
                                <p:column style="width: 90px;">
                                    <f:facet name="header">
                                        <h:outputText value="dochód zus mc"  style="color: red;"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.dochodzus}" rendered="#{!item.brakdokumentow and item.dochodzus gt 0.01 and item.opodatkowanie ne 'ryczałt'}"  stylePlus="color:green;"/>
                                    <bcf:outputpl value="#{item.dochodzus}" rendered="#{!item.brakdokumentow and item.dochodzus lt 0.01 and item.opodatkowanie ne 'ryczałt'}" stylePlus="color:red;"/>
                                </p:column>
                                <!--                            <p:column>
                                                                <f:facet name="header">
                                                                    <h:outputText value="dochód zus nar."/>
                                                                </f:facet>
                                                                <bcf:outputpl value="#{item.dochodzusnar}" rendered="#{!item.brakdokumentow and item.dochodzusnar gt 0.01 and item.opodatkowanie ne 'ryczałt'}" />
                                                                <bcf:outputpl value="#{item.dochodzusnar}" rendered="#{!item.brakdokumentow and item.dochodzusnar lt 0.01}" stylePlus="color:gray"/>
                                                            </p:column>-->

                                <p:column  style="text-align: center;width: 40px;">
                                    <f:facet name="header">
                                        <h:outputText value="PIT"/>
                                    </f:facet>
                                    <h:outputText value="&#x2713;" rendered="#{item.jestpit}" style="color: green;"/>
                                </p:column>
                                <p:column style="text-align: center;width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="data księg."/>
                                    </f:facet>
                                    <h:outputText value="#{item.data}">
                                        <f:convertDateTime dateStyle="medium" locale="pl"/>
                                    </h:outputText>
                                </p:column>
                                <p:column style="text-align: center;width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="DRA"/>
                                    </f:facet>
                                    <h:outputText value="#{item.draSumy.data}">
                                        <f:convertDateTime dateStyle="medium" locale="pl"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  style="width: 20px;text-align: center;">
                                    <f:facet name="header">
                                        <h:outputText value=""/>
                                    </f:facet>
                                    <h:outputText value="!" style="color: red;" rendered="#{item.blad eq true and item.draSumy.draprzychodyRR eq 0.0}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="DRA przych.RU"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.draSumy.draprzychodyRR}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="DRA przych. / doch."/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.draSumy.draprzychody}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="DRA zdrow."/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.draSumy.zdrowotne}"/>
                                </p:column>
                                <p:column style="text-align: center;width: 40px;">
                                    <f:facet name="header">
                                        <h:outputText value="zrob."/>
                                    </f:facet>
                                    <p:selectBooleanCheckbox value="#{item.zrobiony}">
                                        <p:ajax event="change" global="false" partialSubmit="true" listener="#{dochodDlaDRAView.edytuj(item)}"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                                  <p:column  style="width: 30px;">
                                    <f:facet name="header">
                                            <h:outputText value=""/>
                                    </f:facet>
                                      <p:commandButton icon="fa fa-calculator" actionListener="#{dochodDlaDRAView.przelicz(item.podatnikudzial.podatnikObj.nip)}" update="@parent:@parent"/>
                                </p:column>
                            </p:dataTable>
                        </h:form>
                    </f:view>
                </p:outputPanel>
            </p:tab>
            <p:tab title="Wysyłka DRA">
                <p:outputPanel>
                    <f:view>
                        <h:form id="formtabela1">
                            <style>
                                .odd{
                                    background-color: #e4e3e3 !important;
                                }
                            </style>
                            <p:dataTable lazy="false"  value="#{dochodDlaDRAView.wiersze}" var="item" style="width: 1670px;padding: 20px;" reflow="true"
                                         scrollable="true" scrollHeight="750" scrollRows="30" 
                                         emptyMessage="nie pobrano danych" id="wykazschem" rowKey="#{item.podatnikudzial.podatnikObj.nip}" rowIndexVar="yndex"
                                         selection="#{dochodDlaDRAView.selected}" selectionMode="single" sortBy="#{item.podatnikudzial.nazwiskoimie}">
                                <p:column style="width: 20px;">
                                    <f:facet name="header">
                                        <h:outputText value="id"/>
                                    </f:facet>
                                    <h:outputText value="#{yndex+1}" style="width: 20px;"/>
                                </p:column>
                                <p:column  style="width: 300px;" exportable="false" filterBy="#{item.podatnikudzial.podatnikObj.printnazwa}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="płatnik"/>
                                    </f:facet>
                                    <h:outputText value="#{item.podatnikudzial.podatnikObj.printnazwa}"/>
                                </p:column>
                                <p:column  style="width: 80px;" exportable="false" filterBy="#{item.podatnikudzial.podatnikObj.nip}" filterMatchMode="startsWith">
                                    <f:facet name="header">
                                        <h:outputText value="NIP"/>
                                    </f:facet>
                                    <h:outputText value="#{item.podatnikudzial.podatnikObj.nip}"/>
                                </p:column>

                                <p:column  style="text-align: center;width: 40px;">
                                    <f:facet name="header">
                                        <h:outputText value="PIT"/>
                                    </f:facet>
                                    <h:outputText value="&#x2713;" rendered="#{item.jestpit}" style="color: green;"/>
                                </p:column>
                                <p:column style="text-align: center;width: 60px;">
                                    <f:facet name="header">
                                        <h:outputText value="data księg."/>
                                    </f:facet>
                                    <h:outputText value="#{item.data}">
                                        <f:convertDateTime dateStyle="medium" locale="pl"/>
                                    </h:outputText>
                                </p:column>
                                <p:column style="text-align: center;width: 60px;">
                                    <f:facet name="header">
                                        <h:outputText value="DRA"/>
                                    </f:facet>
                                    <h:outputText value="#{item.draSumy.data}">
                                        <f:convertDateTime dateStyle="medium" locale="pl"/>
                                    </h:outputText>
                                </p:column>
<!--                                <p:column  style="text-align: center;width: 20px;">
                                    <f:facet name="header">
                                        <h:outputText value="term"/>
                                    </f:facet>
                                    <h:outputText value="#{item.draSumy.ubezpZusrca}"/>
                                </p:column>-->
                                <p:column  style="text-align: center;width: 20px;">
                                    <f:facet name="header">
                                        <h:outputText value="ub."/>
                                    </f:facet>
                                    <h:outputText value="#{item.draSumy.ubezpZusrca}"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 50px;">
                                    <f:facet name="header">
                                        <h:outputText value="okres"/>
                                    </f:facet>
                                    <h:outputText value="#{item.draSumy.okres}" style="color: green;"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 20px;">
                                    <f:facet name="header">
                                        <h:outputText value="wer"/>
                                    </f:facet>
                                    <h:outputText value="#{item.draSumy.nr}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="DRA d.zapł."/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.draSumy.dozaplaty}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="PIT-4"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{item.draSumy.pit4}"/>
                                </p:column>
                                <p:column  style="width: 60px;">
                                    <f:facet name="header">
                                        <h:outputText value="Wysłano"/>
                                    </f:facet>
                                    <h:outputText value="#{item.zusmail.datawysylki}" rendered="#{item.zusmail.id ne null}">
                                        <f:convertDateTime dateStyle="medium" locale="pl"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  style="width: 140px;">
                                    <f:facet name="header">
                                        <h:outputText value="email"/>
                                    </f:facet>
                                    <h:outputText value="#{item.zusmail.adresmail}" rendered="#{item.zusmail.id ne null}">
                                    </h:outputText>
                                </p:column>
                                <p:column  style="width: 30px; text-align: center;">
                                    <f:facet name="header">
                                        <h:outputText value=""/>
                                    </f:facet>
                                    <p:commandButton  actionListener="#{dochodDlaDRAView.wyslijMailZUS(item)}" icon="fa fa-envelope" rendered="#{item.zusmail ne null}" update="@parent:@parent"/>
                                </p:column>
                                <!--                          
                                                            <p:column style="text-align: center;width: 40px;">
                                                                <f:facet name="header">
                                                                    <h:outputText value=""/>
                                                                </f:facet>
                                                                <p:selectBooleanCheckbox value="#{item.zrobiony}">
                                                                    <p:ajax event="change" global="false" partialSubmit="true" listener="#{dochodDlaDRAView.edytuj(item)}"/>
                                                                </p:selectBooleanCheckbox>
                                                            </p:column>-->
                            </p:dataTable>
                        </h:form>
                    </f:view>
                </p:outputPanel>
            </p:tab>
            <p:tab title="Rok">
                <p:outputPanel>
                    <f:view>
                        <h:form id="formrok">
                            <p:panelGrid columns="4">
                                <p:selectOneListbox id="podatnikWpisu" value="#{dochodDlaDRAView.podatnik}" style="width: 350px; height: 250px;" converter="#{podatConv}" filter="true" filterMatchMode="contains">
                                    <f:selectItems value="#{podatnikWyborView.listaPodatnikowNoFK}" var="p" itemLabel="#{p.nazwapelnaPDF}" itemValue="#{p}"/>
                                    <p:ajax event="change" partialSubmit="true"  listener="#{dochodDlaDRAView.pobierzrokByNip()}" update="akordeon:formrok:datalist akordeon:formrok:rem"/>
                                </p:selectOneListbox>
                                <p:outputLabel for="miesiacWpisu" value="miesiąc graniczny"/>
                                <p:selectOneMenu id="miesiacWpisu" value="#{dochodDlaDRAView.maxmc}" style="width: 70px;" label="miesiąc graniczny" title="miesiąc graniczny">
                                    <f:selectItem itemLabel="wybierz" noSelectionOption="true"/>
                                    <f:selectItems value="#{mce.mceList}"/>
                                    <p:ajax event="change" partialSubmit="true" />
                                </p:selectOneMenu>
                                <p:commandButton id="przeliczbutton1a" value="pobierz" actionListener="#{dochodDlaDRAView.przeliczRok()}"  style="width: 120px;margin-left: 20px;" update="akordeon:formrok"/>
                            </p:panelGrid>
                            <p:dataTable lazy="false"  value="#{dochodDlaDRAView.wierszerok}" var="item2" style="width: 1600px;padding: 20px;max-height: 700px;overflow-y: scroll" reflow="true"
                                         sortBy="#{item2.rokmc}" id="datalist"
                                             emptyMessage="nie pobrano danych"  rowKey="#{item2.mc}" rowIndexVar="yndex1"
                                             >
                                <p:column width="30" exportable="false" sortBy="#{item2.rokmc}">
                                        <f:facet name="header">
                                            <h:outputText value="mc"/>
                                        </f:facet>
                                        <h:outputText value="#{item2.mc}"/>
                                    </p:column>
                                    <p:column width="100">
                                        <f:facet name="header">
                                            <h:outputText value="opodatkowanie"/>
                                        </f:facet>
                                        <h:outputText value="#{item2.opodatkowanie}" rendered="#{!item2.opodatkowanie.equals('brak opodatkowania')}"/>
                                        <h:outputText value="brak opodatkowania" rendered="#{item2.opodatkowanie.equals('brak opodatkowania')}" style="color: darkviolet"/>
                                    </p:column>
                                    <p:column width="40" >
                                        <f:facet name="header">
                                            <h:outputText value="udzial"/>
                                        </f:facet>
                                        <h:outputText value="#{item2.podatnikudzial.udzial}"/>
                                    </p:column>
                                    <p:column width="200" exportable="false">
                                        <f:facet name="header">
                                            <h:outputText value="płatnik"/>
                                        </f:facet>
                                        <h:outputText value="#{item2.podatnikudzial.podatnikObj.printnazwa}"/>
                                    </p:column>
                                    <p:column width="100" exportable="false">
                                        <f:facet name="header">
                                            <h:outputText value="imie i naz"/>
                                        </f:facet>
                                        <h:outputText value="#{item2.podatnikudzial.nazwiskoimie}"/>
                                    </p:column>
                                    <p:column width="80" exportable="false">
                                        <f:facet name="header">
                                            <h:outputText value="NIP"/>
                                        </f:facet>
                                        <h:outputText value="#{item2.podatnikudzial.podatnikObj.nip}"/>
                                    </p:column>
                                    <p:column width="60">
                                        <f:facet name="header">
                                            <h:outputText value=""/>
                                        </f:facet>
                                        <h:outputText value="brak dok." rendered="#{item2.brakdokumentow}"/>
                                    </p:column>
                                    <p:column width="70">
                                        <f:facet name="header">
                                            <h:outputText value="dochód pod. mc"/>
                                        </f:facet>
                                        <bcf:outputpl value="#{item2.wynikpodatkowymc}" rendered="#{!item2.brakdokumentow and item2.wynikpodatkowymc gt 0.0}"/>
                                        <bcf:outputpl value="#{item2.wynikpodatkowymc}" rendered="#{!item2.brakdokumentow and item2.wynikpodatkowymc lt 0.0}" stylePlus="color:red;"/>
                                    </p:column>
                                    <p:column width="70">
                                        <f:facet name="header">
                                            <h:outputText value="dochód pod. nar."/>
                                        </f:facet>
                                        <bcf:outputpl value="#{item2.wynikpodatkowynar}" rendered="#{!item2.brakdokumentow and item2.wynikpodatkowynar gt 0.0}"/>
                                        <bcf:outputpl value="#{item2.wynikpodatkowynar}" rendered="#{!item2.brakdokumentow and item2.wynikpodatkowynar lt 0.0}" stylePlus="color:red;"/>
                                    </p:column>
                                    <p:column width="70">
                                        <f:facet name="header">
                                            <h:outputText value="dochód zus mc"/>
                                        </f:facet>
                                        <bcf:outputpl value="#{item2.dochodzus}" rendered="#{!item2.brakdokumentow and item2.dochodzus gt 0.01}" stylePlus="#{item2.opodatkowanie.equals('ryczałt')?'color:gray':''}"/>
                                        <bcf:outputpl value="#{item2.dochodzus}" rendered="#{!item2.brakdokumentow and item2.dochodzus lt 0.01}" stylePlus="color:red;"/>
                                    </p:column>
                                    <p:column width="70">
                                        <f:facet name="header">
                                            <h:outputText value="dochód zus nar."/>
                                        </f:facet>
                                        <bcf:outputpl value="#{item2.dochodzusnar}" rendered="#{!item2.brakdokumentow and item2.dochodzusnar gt 0.01}" stylePlus="#{!item2.opodatkowanie.equals('ryczałt')?'color:gray':''}"/>
                                        <bcf:outputpl value="#{item2.dochodzusnar}" rendered="#{!item2.brakdokumentow and item2.dochodzusnar lt 0.01}" stylePlus="color:red;"/>
                                    </p:column>
<!--                                        <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="dochód zus netto mc"/>
                                        </f:facet>
                                        <bcf:outputpl value="#{item2.dochodzusnetto}" rendered="#{!item2.brakdokumentow and item2.dochodzusnetto gt 0.01}" stylePlus="#{item2.opodatkowanie.equals('ryczałt')?'color:gray':''}"/>
                                        <bcf:outputpl value="#{item2.dochodzusnetto}" rendered="#{!item2.brakdokumentow and item2.dochodzusnetto lt 0.01}" stylePlus="color:red;"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="dochód zus nertto nar."/>
                                        </f:facet>
                                        <bcf:outputpl value="#{item2.dochodzusnettonar}" rendered="#{!item2.brakdokumentow and item2.dochodzusnettonar gt 0.01}" stylePlus="#{!item2.opodatkowanie.equals('ryczałt')?'color:gray':''}"/>
                                        <bcf:outputpl value="#{item2.dochodzusnettonar}" rendered="#{!item2.brakdokumentow and item2.dochodzusnettonar lt 0.01}" stylePlus="color:red;"/>
                                    </p:column>-->

                                    <p:column width="40" style="text-align: center;">
                                        <f:facet name="header">
                                            <h:outputText value="PIT"/>
                                        </f:facet>
                                        <bcf:outputpl value="&#x2713;" rendered="#{item2.jestpit}" style="color: green;"/>
                                    </p:column>
                                    <p:column width="70" style="text-align: center;">
                                        <f:facet name="header">
                                            <h:outputText value="data księg."/>
                                        </f:facet>
                                        <h:outputText value="#{item2.data}">
                                            <f:convertDateTime dateStyle="medium" locale="pl"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>
                            <p:outputPanel style="padding: 10px;" id="rem">
                                <p:panelGrid columns="2">
                                    <h:outputText value="dochód narastająco 2022:"/>
                                    <bcf:outputpl value="#{dochodDlaDRAView.rokdochod}"/>
                                    <h:outputText value="remanent końcowy:"/>
                                    <bcf:outputpl value="#{dochodDlaDRAView.remanentpoczatkowy}"/>
                                    <h:outputText value="remanent początkowy"/>
                                    <bcf:outputpl value="#{dochodDlaDRAView.remanentkoncowy}"/>
                                    <h:outputText value="różnica remanentów:"/>
                                    <bcf:outputpl value="#{-dochodDlaDRAView.remannetroznica}"/>
                                </p:panelGrid>
                            </p:outputPanel>
                            <p:messages><p:autoUpdate/></p:messages>
                        </h:form>
                    </f:view>
                </p:outputPanel>
            </p:tab>
            <p:tab title="Statystyka DRA">
                <p:outputPanel>
                    <f:view>
                        <h:form id="formtabeladra">
                            <style>
                                .odd{
                                    background-color: #e4e3e3 !important;
                                }
                            </style>
                            <p:panelGrid columns="6">
                                <h:outputText value="rok deklaracji:" style="text-shadow: #6374AB 1px -1px 1px"/>
                                <p:selectOneMenu id="rokWpisu" value="#{dochodDlaDRAView.rok}" style="width: 70px;">
                                    <f:selectItem itemLabel="wybierz" noSelectionOption="true"/>
                                    <f:selectItems value="#{roki.rokiList}"/>
                                    <p:ajax event="change" partialSubmit="true"/>
                                </p:selectOneMenu>
                                <h:outputText value="miesiąc deklaracji:" style="text-shadow: #6374AB 1px -1px 1px"/>
                                <p:selectOneMenu id="miesiacWpisu" value="#{dochodDlaDRAView.mcplatnik}" style="width: 70px;">
                                    <f:selectItem itemLabel="wybierz" noSelectionOption="true"/>
                                    <f:selectItems value="#{mce.mceList}"/>
                                    <p:ajax event="change" partialSubmit="true" listener="#{dochodDlaDRAView.podsumujDRA()}" update="akordeon:formtabeladra"/>
                                </p:selectOneMenu>
                                <p:commandButton id="przeliczbutton1" value="pobierz z bazy" actionListener="#{dochodDlaDRAView.podsumujDRA()}"  style="width: 120px;margin-left: 20px;" update="akordeon:formtabeladra"/>
                                <p:commandButton id="przeliczbutton2" value="aktual. z Płatnika" actionListener="#{dochodDlaDRAView.pobierzzplatnika}"  style="width: 120px;margin-left: 20px;" update="akordeon:formtabeladra"/>
                            </p:panelGrid>
                            <p:dataTable lazy="false"  value="#{dochodDlaDRAView.drasumy}" var="itemdra" style="width: 1980px;padding: 20px;"  reflow="true"
                                         scrollable="true" scrollHeight="750" scrollRows="30" selectionMode="single"
                                         emptyMessage="nie pobrano danych" id="wykazschem" rowKey="#{itemdra.nazwa}" rowIndexVar="yndex1"
                                         sortBy="#{itemdra.nazwa}" >
                                <p:column style="width: 20px;">
                                    <f:facet name="header">
                                        <h:outputText value="id"/>
                                    </f:facet>
                                    <h:outputText value="#{yndex1+1}" style="width: 20px;"/>
                                </p:column>
                                <p:column  style="width: 250px;" exportable="false" sortBy="#{itemdra.nazwa}" filterBy="#{itemdra.nazwa}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="płatnik"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.nazwa}"/>
                                </p:column>
                                <p:column  style="width: 250px;" exportable="false" sortBy="#{itemdra.podatnik.printnazwa}" filterBy="#{itemdra.podatnik.printnazwa}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="płatnik"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.podatnik.printnazwa}"/>
                                </p:column>
                                <p:column  style="width: 80px;" exportable="false"  filterBy="#{itemdra.podatnik.nip}" filterMatchMode="startsWith">
                                    <f:facet name="header">
                                        <h:outputText value="NIP"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.podatnik.nip}"/>
                                </p:column>
                                <p:column  style="width: 40px;" exportable="false"  filterBy="#{itemdra.kod}" filterMatchMode="startsWith">
                                    <f:facet name="header">
                                        <h:outputText value="kod"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.kod}"/>
                                </p:column>
                                <p:column style="text-align: center;width: 90px;" sortBy="#{itemdra.data}">
                                    <f:facet name="header">
                                        <h:outputText value="data"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.data}">
                                        <f:convertDateTime dateStyle="medium" locale="pl"/>
                                    </h:outputText>
                                </p:column>
                                <p:column style="text-align: center;width: 20px;">
                                    <f:facet name="header">
                                        <h:outputText value="nr"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.nr}">
                                    </h:outputText>
                                </p:column>
                                <p:column style="text-align: center;width: 20px;">
                                    <f:facet name="header">
                                        <h:outputText value="wysł"/>
                                    </f:facet>
                                    <h:outputText value="&#x2713;" rendered="#{itemdra.zusdra.statuspt eq 'Z'}">
                                    </h:outputText>
                                </p:column>
                                <p:column  style="text-align: center;width: 30px;" sortBy="#{itemdra.ubezpieczeni}">
                                    <f:facet name="header">
                                        <h:outputText value="ub."/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.ubezpieczeni}" rendered="#{itemdra.ubezpieczeni gt 0}"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 30px;">
                                    <f:facet name="header">
                                        <h:outputText value="prz."/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.przedsiebiorcy}"  rendered="#{itemdra.przedsiebiorcy gt 0}"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 30px;">
                                    <f:facet name="header">
                                        <h:outputText value="prac."/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.pracownicy}"  rendered="#{itemdra.pracownicy gt 0}"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 30px;">
                                    <f:facet name="header">
                                        <h:outputText value="prac.0"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.pracownicyzerowi}"  rendered="#{itemdra.pracownicyzerowi gt 0}"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 30px;">
                                    <f:facet name="header">
                                        <h:outputText value="zlec."/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.zleceniobiorcy}"  rendered="#{itemdra.zleceniobiorcy gt 0}"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 30px;">
                                    <f:facet name="header">
                                        <h:outputText value="zlec.0"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.zleceniobiorcyzerowi}"  rendered="#{itemdra.zleceniobiorcyzerowi gt 0}"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 30px;">
                                    <f:facet name="header">
                                        <h:outputText value="inne"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.innetytuly}"  rendered="#{itemdra.innetytuly gt 0}"/>
                                </p:column>
                                <p:column  style="text-align: center;width: 30px;">
                                    <f:facet name="header">
                                        <h:outputText value="stud."/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.studenci}"  rendered="#{itemdra.studenci gt 0}"/>
                                </p:column>
<!--                                <p:column  style="text-align: center;width: 50px;">
                                    <f:facet name="header">
                                        <h:outputText value="okres"/>
                                    </f:facet>
                                    <h:outputText value="#{itemdra.okres}" style="color: green;"/>
                                </p:column>-->
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="DRA d.zapł."/>
                                    </f:facet>
                                    <bcf:outputpl value="#{itemdra.dozaplaty}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="ZUS 51"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{itemdra.spoleczne}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="ZUS 52"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{itemdra.zdrowotne}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="ZUS 53"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{itemdra.fp}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="Przychody"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{itemdra.draprzychody}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                        <h:outputText value="Przychody RRU"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{itemdra.draprzychodyRR}"/>
                                </p:column>
                                <p:column  style="width: 70px;">
                                    <f:facet name="header">
                                            <h:outputText value="PIT-4"/>
                                    </f:facet>
                                    <bcf:outputpl value="#{itemdra.pit4}"/>
                                </p:column>

                            </p:dataTable>
                            <p:panelGrid columns="2">
                                <h:outputText value="ubezpieczeni"/>
                                <h:outputText value="#{dochodDlaDRAView.razemubezpieczeni}"/>
                                <h:outputText value="przedsiębiorcy"/>
                                <h:outputText value="#{dochodDlaDRAView.razemprzedsiebiorcy}"/>
                                <h:outputText value="pracownicy"/>
                                <h:outputText value="#{dochodDlaDRAView.razempracownicy}"/>
                                <h:outputText value="zleceniobiorcy"/>
                                <h:outputText value="#{dochodDlaDRAView.razemzleceniobiorcy}"/>
                                <h:outputText value="inne tytuły"/>
                                <h:outputText value="#{dochodDlaDRAView.razeminne}"/>
                            </p:panelGrid>
                        </h:form>
                    </f:view>
                </p:outputPanel>
            </p:tab>
            <!--         <p:tab title="Rok">
                        <p:outputPanel>
                            <f:view>
                                <h:form>
                                
                                </h:form>
                                </f:view>
                        </p:outputPanel>
                    </p:tab>-->
        </p:tabView>
    </p:outputPanel>
</ui:composition>   



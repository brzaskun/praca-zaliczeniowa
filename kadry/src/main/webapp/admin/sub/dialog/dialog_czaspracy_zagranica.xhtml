<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"

    xmlns:bcf="http://brzaskun.com/facelets"
>
    <p:dialog id="dialogoddelegowanie" header="Rozliczenie oddelegowania" widgetVar="dialogoddelegowanie"  style="overflow-y: scroll;" dynamic="true"
              resizable="false"  onShow="ustawdialog('dialogoddelegowanie','centertile',1650,800);" closeOnEscape="true" onHide="resetujdialog('dialogoddelegowanie');" 
              fitViewport="true">
        <p:ajax event="open" listener="#{oddelegowanieView.init()}" update="OddelegowanieForm OddelegowanieForm1 OddelegowanieForm2 OddelegowanieForm3" global="true"/>
        <h:form  styleClass="formadmin" id="OddelegowanieForm">
            <p:commandButton value="XLS" >
                <p:dataExporter type="xls" target="OddelegowanieForm:datalist" fileName="lista"/>
            </p:commandButton>
            <p:dataTable id="datalist" value="#{oddelegowanieView.tabela}" var="itemodd" widgetVar="datalistodd"
                                 selectionMode="single" selection="#{oddelegowanieView.selected}" rowIndexVar="indexodd"
                                 rowKey="#{itemodd.hashCode()}" sortBy="#{itemodd.pracownik.nazwiskoImie}"
                                 style="height: 300px; overflow-y: scroll; width: 1400px; margin-top: 10px; margin-left: 10px;"
                                 emptyMessage="nie pobrano danych"
                                 >
                <p:ajax event="filter" global="false"/>
                <f:facet name="header">
                    <h:outputText value="dni oddelegowania"/>
                </f:facet>
                <p:column headerText="pracownik" width="150" sortBy="#{itemodd.pracownik.nazwiskoImie}" sortOrder="asc" sortPriority="1" filterBy="#{itemodd.pracownik.nazwisko}" filterMatchMode="contains" filterable="true">
                    <h:outputText value="#{itemodd.pracownik.nazwiskoImie}"/>
                </p:column>
                <p:column headerText="rok" width="50" style="text-align: center;" sortBy="#{itemodd.rok}" sortOrder="asc" sortPriority="2" filterBy="#{itemodd.rok}" filterMatchMode="contains">
                    <h:outputText value="#{itemodd.rok}" style="color: green" rendered="#{itemodd.rok eq 2022}"/>
                    <h:outputText value="#{itemodd.rok}" rendered="#{itemodd.rok ne 2022}"/>
                </p:column>
                <p:column headerText="01" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_01.liczbadni}" rendered="#{itemodd.o_01 ne null and itemodd.o_01.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="02" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_02.liczbadni}" rendered="#{itemodd.o_02 ne null and itemodd.o_02.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="03" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_03.liczbadni}" rendered="#{itemodd.o_03 ne null and itemodd.o_03.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="04" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_04.liczbadni}" rendered="#{itemodd.o_04 ne null and itemodd.o_04.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="05" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_05.liczbadni}" rendered="#{itemodd.o_05 ne null and itemodd.o_05.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="06" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_06.liczbadni}" rendered="#{itemodd.o_06 ne null and itemodd.o_06.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="07" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_07.liczbadni}" rendered="#{itemodd.o_07 ne null and itemodd.o_07.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="08" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_08.liczbadni}" rendered="#{itemodd.o_08 ne null and itemodd.o_08.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="09" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_09.liczbadni}" rendered="#{itemodd.o_09 ne null and itemodd.o_09.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="10" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_10.liczbadni}" rendered="#{itemodd.o_10 ne null and itemodd.o_10.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="11" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_11.liczbadni}" rendered="#{itemodd.o_11 ne null and itemodd.o_11.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="12" style="text-align: center;">
                    <h:outputText value="#{itemodd.o_12.liczbadni}" rendered="#{itemodd.o_12 ne null and itemodd.o_12.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="suma" style="margin-left: 10px; text-align: center;">
                    <h:outputText value="#{itemodd.sumadni}" style="color: #{itemodd.sumadni gt 182?'red':'initial'}"/>
                </p:column>
                <p:column headerText="przekr." width="50">
                    <h:outputText value="#{itemodd.rokmcprzekroczenia}" rendered="#{itemodd.rokmcprzekroczenia ne null}"/>
                </p:column>
                <p:column headerText="pracownik" width="150">
                    <h:outputText value="#{itemodd.pracownik.nazwiskoImie}"/>
                </p:column>
            </p:dataTable>
        </h:form>
         <h:form  styleClass="formadmin" id="OddelegowanieForm1">
            <p:commandButton value="XLS" >
                <p:dataExporter type="xls" target="OddelegowanieForm1:datalist1" fileName="lista"/>
            </p:commandButton>
            <p:dataTable id="datalist1" value="#{oddelegowanieView.tabela}" var="itemodddel" widgetVar="datalistodd1"
                                 selectionMode="single" selection="#{oddelegowanieView.selected1}" rowIndexVar="indexodd"
                                 rowKey="#{itemodddel.hashCode()}" sortBy="#{itemodddel.pracownik.nazwiskoImie}"
                                 style="height: 300px; overflow-y: scroll; width: 1400px; margin-top: 10px; margin-left: 10px;"
                                 emptyMessage="nie pobrano danych"
                                 >
                <p:ajax event="filter" global="false"/>
                <f:facet name="header">
                    <h:outputText value="podatek niemcy"/>
                </f:facet>
                <p:column headerText="pracownik" width="150" sortBy="#{itemodddel.pracownik.nazwiskoImie}" sortOrder="asc" sortPriority="1" filterBy="#{itemodddel.pracownik.nazwisko}" filterMatchMode="contains" filterable="true">
                    <h:outputText value="#{itemodddel.pracownik.nazwiskoImie}"/>
                </p:column>
                 <p:column headerText="rok" width="50" style="text-align: center;" sortBy="#{itemodddel.rok}" sortOrder="asc" sortPriority="2" filterBy="#{itemodddel.rok}" filterMatchMode="contains">
                    <h:outputText value="#{itemodddel.rok}" style="color: green" rendered="#{itemodddel.rok eq 2022}"/>
                    <h:outputText value="#{itemodddel.rok}" rendered="#{itemodddel.rok ne 2022}"/>
                </p:column>
                <p:column headerText="01">
                    <bcf:outputpl0 value="#{itemodddel.o_01.podatekzagranica}" rendered="#{itemodddel.o_01 ne null and itemodddel.o_01.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="02">
                    <bcf:outputpl0 value="#{itemodddel.o_02.podatekzagranica}" rendered="#{itemodddel.o_02 ne null and itemodddel.o_02.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="03">
                    <bcf:outputpl0 value="#{itemodddel.o_03.podatekzagranica}" rendered="#{itemodddel.o_03 ne null and itemodddel.o_03.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="04">
                    <bcf:outputpl0 value="#{itemodddel.o_04.podatekzagranica}" rendered="#{itemodddel.o_04 ne null and itemodddel.o_04.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="05">
                    <bcf:outputpl0 value="#{itemodddel.o_05.podatekzagranica}" rendered="#{itemodddel.o_05 ne null and itemodddel.o_05.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="06">
                    <bcf:outputpl0 value="#{itemodddel.o_06.podatekzagranica}" rendered="#{itemodddel.o_06 ne null and itemodddel.o_06.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="07">
                    <bcf:outputpl0 value="#{itemodddel.o_07.podatekzagranica}" rendered="#{itemodddel.o_07 ne null and itemodddel.o_07.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="08">
                    <bcf:outputpl0 value="#{itemodddel.o_08.podatekzagranica}" rendered="#{itemodddel.o_08 ne null and itemodddel.o_08.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="09">
                    <bcf:outputpl0 value="#{itemodddel.o_09.podatekzagranica}" rendered="#{itemodddel.o_09 ne null and itemodddel.o_09.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="10">
                    <bcf:outputpl0 value="#{itemodddel.o_10.podatekzagranica}" rendered="#{itemodddel.o_10 ne null and itemodddel.o_10.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="11">
                    <bcf:outputpl0 value="#{itemodddel.o_11.podatekzagranica}" rendered="#{itemodddel.o_11 ne null and itemodddel.o_11.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="12">
                    <bcf:outputpl0 value="#{itemodddel.o_12.podatekzagranica}" rendered="#{itemodddel.o_12 ne null and itemodddel.o_12.liczbadni gt 0}"/>
                </p:column>
                <p:column headerText="suma" style="margin-left: 10px; text-align: center;">
                    <h:outputText value="#{itemodddel.sumadni}" style="color: #{itemodddel.sumadni gt 182?'red':'initial'}"/>
                </p:column>
                <p:column headerText="przekr." width="50">
                    <h:outputText value="#{itemodddel.rokmcprzekroczenia}" rendered="#{itemodddel.rokmcprzekroczenia ne null}"/>
                </p:column>
                <p:column headerText="pracownik" width="150">
                    <h:outputText value="#{itemodddel.pracownik.nazwiskoImie}"/>
                </p:column>
            </p:dataTable>
        </h:form>
         <h:form  styleClass="formadmin" id="OddelegowanieForm2">
            <p:commandButton value="XLS" >
                <p:dataExporter type="xls" target="OddelegowanieForm2:datalist2" fileName="lista"/>
            </p:commandButton>
             <p:dataTable id="datalist2" value="#{oddelegowanieView.tabela2001}" var="itemoddpol" widgetVar="datalistodd2"
                                 selectionMode="single" selection="#{oddelegowanieView.selected2}" rowIndexVar="indexodd"
                                 rowKey="#{itemoddpol.hashCode()}" sortBy="#{itemoddpol.pracownik.nazwiskoImie}"
                                 style="height: 300px; overflow-y: scroll; width: 1400px; margin-top: 10px; margin-left: 10px;"
                                 emptyMessage="nie pobrano danych"
                                 >
                 <p:ajax event="filter" global="false"/>
                  <f:facet name="header">
                    <h:outputText value="podatek polska "/>
                </f:facet>
                 <p:column headerText="pracownik" width="150" sortBy="#{itemoddpol.pracownik.nazwiskoImie}" sortOrder="asc" sortPriority="1" filterBy="#{itemoddpol.pracownik.nazwisko}" filterMatchMode="contains">
                    <h:outputText value="#{itemoddpol.pracownik.nazwiskoImie}"/>
                </p:column>
                <p:column headerText="rok" width="50" style="text-align: center;" sortBy="#{itemoddpol.rok}" sortOrder="asc" sortPriority="2" filterBy="#{itemoddpol.rok}" filterMatchMode="contains">
                    <h:outputText value="#{itemoddpol.rok}" style="color: green" rendered="#{itemoddpol.rok eq 2022}"/>
                    <h:outputText value="#{itemoddpol.rok}" rendered="#{itemoddpol.rok ne 2022}"/>
                </p:column>
                <p:column headerText="01">
                    <bcf:outputpl0 value="#{itemoddpol.o_01.podatekpolska}" />
                </p:column>
                <p:column headerText="02">
                    <bcf:outputpl0 value="#{itemoddpol.o_02.podatekpolska}" />
                </p:column>
                <p:column headerText="03">
                    <bcf:outputpl0 value="#{itemoddpol.o_03.podatekpolska}" />
                </p:column>
                <p:column headerText="04">
                    <bcf:outputpl0 value="#{itemoddpol.o_04.podatekpolska}" />
                </p:column>
                <p:column headerText="05">
                    <bcf:outputpl0 value="#{itemoddpol.o_05.podatekpolska}" />
                </p:column>
                <p:column headerText="06">
                    <bcf:outputpl0 value="#{itemoddpol.o_06.podatekpolska}" />
                </p:column>
                <p:column headerText="07">
                    <bcf:outputpl0 value="#{itemoddpol.o_07.podatekpolska}" />
                </p:column>
                <p:column headerText="08" >
                    <bcf:outputpl0 value="#{itemoddpol.o_08.podatekpolska}" />
                </p:column>
                <p:column headerText="09">
                    <bcf:outputpl0 value="#{itemoddpol.o_09.podatekpolska}" />
                </p:column>
                <p:column headerText="10">
                    <bcf:outputpl0 value="#{itemoddpol.o_10.podatekpolska}" />
                </p:column>
                <p:column headerText="11">
                    <bcf:outputpl0 value="#{itemoddpol.o_11.podatekpolska}" />
                </p:column>
                <p:column headerText="12">
                    <bcf:outputpl0 value="#{itemoddpol.o_12.podatekpolska}" />
                </p:column>
                <p:column headerText="suma" style="margin-left: 10px; text-align: center;">
                    <h:outputText value="#{itemoddpol.sumadni}" style="color: #{itemoddpol.sumadni gt 182?'red':'initial'}"/>
                </p:column>
                <p:column headerText="przekr." width="50">
                    <h:outputText value="#{itemoddpol.rokmcprzekroczenia}" rendered="#{itemoddpol.rokmcprzekroczenia ne null}"/>
                </p:column>
                <p:column headerText="pracownik" width="150">
                    <h:outputText value="#{itemoddpol.pracownik.nazwiskoImie}"/>
                </p:column>
            </p:dataTable>
        </h:form>
        
        <h:form  styleClass="formadmin" id="OddelegowanieForm3">
            <p:commandButton value="XLS" >
                <p:dataExporter type="xls" target="OddelegowanieForm3:datalist3" fileName="lista"/>
            </p:commandButton>
             <p:dataTable id="datalist3" value="#{oddelegowanieView.tabela2001}" var="itemoddd" widgetVar="datalistodd3"
                                 selectionMode="single" selection="#{oddelegowanieView.selected3}" rowIndexVar="indexoddd"
                                 rowKey="#{itemoddd.hashCode()}" sortBy="#{itemoddd.pracownik.nazwiskoImie}"
                                 style="height: 300px; overflow-y: scroll; width: 900px; margin-top: 10px; margin-left: 10px;"
                                 emptyMessage="nie pobrano danych"
                                 >
                  <f:facet name="header">
                    <h:outputText value="rozbicie podatków"/>
                </f:facet>
                <p:column headerText="pracownik" width="150" sortBy="#{itemoddd.pracownik.nazwiskoImie}" sortOrder="asc" sortPriority="1">
                    <h:outputText value="#{itemoddd.pracownik.nazwiskoImie}"/>
                </p:column>
                <p:column headerText="rok" width="50" style="text-align: center;" sortBy="#{itemoddd.rok}" sortOrder="asc" sortPriority="2">
                    <h:outputText value="#{itemoddd.rok}"/>
                </p:column>
                <p:column headerText="przychód polski" width="70">
                    <bcf:outputpl0 value="#{itemoddd.przychodpolski}"/>
                </p:column>
                 <p:column headerText="podatek polska" width="70">
                     <bcf:outputpl0 value="#{itemoddd.podatekpolski}" />
                </p:column>
                 <p:column headerText="przychód zagr" width="70">
                     <bcf:outputpl0 value="#{itemoddd.przychodzagraniczny}" />
                </p:column>
                  <p:column headerText="podatek zagranica" width="70">
                      <bcf:outputpl0 value="#{itemoddd.podatekzagraniczny}" />
                </p:column>
            </p:dataTable>
        </h:form>
    </p:dialog>
</ui:composition>
